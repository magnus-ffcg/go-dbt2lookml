<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# parsers

```go
import "github.com/magnus-ffcg/go-dbt2lookml/pkg/parsers"
```

Package parsers provides functionality for parsing dbt manifest and catalog files.

This package handles reading and parsing dbt's generated JSON files \(manifest.json and catalog.json\) into Go structs for further processing. It manages the complex task of merging catalog metadata with manifest model definitions.

Key components:

- DbtParser: Main coordinator for parsing dbt artifacts
- ModelParser: Parses dbt model definitions
- CatalogParser: Parses dbt catalog metadata
- ExposureParser: Parses dbt exposure definitions

The parser supports:

- BigQuery data types and nested structures
- Column metadata and descriptions
- Model relationships and dependencies
- Custom meta tags for LookML generation
- Filtering by tags and model selection

Example usage:

```
cfg := &config.Config{
    ManifestPath: "./target/manifest.json",
    CatalogPath:  "./target/catalog.json",
}
parser := NewDbtParser(cfg)
models, err := parser.Parse()
```

## Index

- [type CatalogParser](<#CatalogParser>)
  - [func NewCatalogParser\(catalog \*models.DbtCatalog, rawCatalog map\[string\]interface\{\}, cfg \*config.Config\) \*CatalogParser](<#NewCatalogParser>)
  - [func \(p \*CatalogParser\) GetCatalogColumn\(modelUniqueID, columnName string\) \(\*models.DbtCatalogNodeColumn, bool\)](<#CatalogParser.GetCatalogColumn>)
  - [func \(p \*CatalogParser\) GetColumnDataType\(modelUniqueID, columnName string\) \(string, bool\)](<#CatalogParser.GetColumnDataType>)
  - [func \(p \*CatalogParser\) GetColumnInnerTypes\(modelUniqueID, columnName string\) \(\[\]string, bool\)](<#CatalogParser.GetColumnInnerTypes>)
  - [func \(p \*CatalogParser\) GetColumnType\(modelUniqueID, columnName string\) \(string, bool\)](<#CatalogParser.GetColumnType>)
  - [func \(p \*CatalogParser\) GetModelCatalogData\(modelUniqueID string\) \(map\[string\]interface\{\}, bool\)](<#CatalogParser.GetModelCatalogData>)
  - [func \(p \*CatalogParser\) GetNestedColumns\(modelUniqueID, parentColumnName string\) \[\]models.DbtCatalogNodeColumn](<#CatalogParser.GetNestedColumns>)
  - [func \(p \*CatalogParser\) IsArrayType\(modelUniqueID, columnName string\) bool](<#CatalogParser.IsArrayType>)
  - [func \(p \*CatalogParser\) IsStructType\(modelUniqueID, columnName string\) bool](<#CatalogParser.IsStructType>)
  - [func \(p \*CatalogParser\) ProcessModelColumns\(model \*models.DbtModel\) \(\*models.DbtModel, error\)](<#CatalogParser.ProcessModelColumns>)
- [type DbtParser](<#DbtParser>)
  - [func NewDbtParser\(cliArgs interface\{\}, rawManifest, rawCatalog map\[string\]interface\{\}\) \(\*DbtParser, error\)](<#NewDbtParser>)
  - [func \(p \*DbtParser\) GetModels\(\) \(\[\]\*models.DbtModel, error\)](<#DbtParser.GetModels>)
- [type ExposureParser](<#ExposureParser>)
  - [func NewExposureParser\(manifest \*models.DbtManifest\) \*ExposureParser](<#NewExposureParser>)
  - [func \(p \*ExposureParser\) GetAllExposures\(\) \[\]models.DbtExposure](<#ExposureParser.GetAllExposures>)
  - [func \(p \*ExposureParser\) GetExposureByName\(name string\) \(\*models.DbtExposure, bool\)](<#ExposureParser.GetExposureByName>)
  - [func \(p \*ExposureParser\) GetExposureModelDependencies\(exposureName string\) \(\[\]string, bool\)](<#ExposureParser.GetExposureModelDependencies>)
  - [func \(p \*ExposureParser\) GetExposures\(tag string\) \[\]string](<#ExposureParser.GetExposures>)
  - [func \(p \*ExposureParser\) GetExposuresByTag\(tag string\) \[\]models.DbtExposure](<#ExposureParser.GetExposuresByTag>)
  - [func \(p \*ExposureParser\) ValidateExposureRefs\(modelNames \[\]string\) map\[string\]\[\]string](<#ExposureParser.ValidateExposureRefs>)
- [type ModelFilterOptions](<#ModelFilterOptions>)
- [type ModelParser](<#ModelParser>)
  - [func NewModelParser\(manifest \*models.DbtManifest, cfg \*config.Config\) \*ModelParser](<#NewModelParser>)
  - [func \(p \*ModelParser\) FilterModels\(modelsList \[\]\*models.DbtModel, options ModelFilterOptions\) \[\]\*models.DbtModel](<#ModelParser.FilterModels>)
  - [func \(p \*ModelParser\) GetAllModels\(\) \(\[\]\*models.DbtModel, error\)](<#ModelParser.GetAllModels>)
  - [func \(p \*ModelParser\) GetModelByName\(name string\) \(\*models.DbtModel, error\)](<#ModelParser.GetModelByName>)
  - [func \(p \*ModelParser\) GetModelsByTag\(tag string\) \(\[\]\*models.DbtModel, error\)](<#ModelParser.GetModelsByTag>)


<a name="CatalogParser"></a>
## type CatalogParser

CatalogParser handles parsing of DBT catalog data

```go
type CatalogParser struct {
    // contains filtered or unexported fields
}
```

<a name="NewCatalogParser"></a>
### func NewCatalogParser

```go
func NewCatalogParser(catalog *models.DbtCatalog, rawCatalog map[string]interface{}, cfg *config.Config) *CatalogParser
```

NewCatalogParser creates a new CatalogParser instance

<a name="CatalogParser.GetCatalogColumn"></a>
### func \(\*CatalogParser\) GetCatalogColumn

```go
func (p *CatalogParser) GetCatalogColumn(modelUniqueID, columnName string) (*models.DbtCatalogNodeColumn, bool)
```

GetCatalogColumn gets a specific column from the catalog

<a name="CatalogParser.GetColumnDataType"></a>
### func \(\*CatalogParser\) GetColumnDataType

```go
func (p *CatalogParser) GetColumnDataType(modelUniqueID, columnName string) (string, bool)
```

GetColumnDataType gets the simplified data type for a specific column

<a name="CatalogParser.GetColumnInnerTypes"></a>
### func \(\*CatalogParser\) GetColumnInnerTypes

```go
func (p *CatalogParser) GetColumnInnerTypes(modelUniqueID, columnName string) ([]string, bool)
```

GetColumnInnerTypes gets the inner types for a specific column \(for ARRAY/STRUCT types\)

<a name="CatalogParser.GetColumnType"></a>
### func \(\*CatalogParser\) GetColumnType

```go
func (p *CatalogParser) GetColumnType(modelUniqueID, columnName string) (string, bool)
```

GetColumnType gets the BigQuery type for a specific column

<a name="CatalogParser.GetModelCatalogData"></a>
### func \(\*CatalogParser\) GetModelCatalogData

```go
func (p *CatalogParser) GetModelCatalogData(modelUniqueID string) (map[string]interface{}, bool)
```

GetModelCatalogData gets the raw catalog data for a specific model

<a name="CatalogParser.GetNestedColumns"></a>
### func \(\*CatalogParser\) GetNestedColumns

```go
func (p *CatalogParser) GetNestedColumns(modelUniqueID, parentColumnName string) []models.DbtCatalogNodeColumn
```

GetNestedColumns gets all nested columns for a given parent column

<a name="CatalogParser.IsArrayType"></a>
### func \(\*CatalogParser\) IsArrayType

```go
func (p *CatalogParser) IsArrayType(modelUniqueID, columnName string) bool
```

IsArrayType checks if a column is an ARRAY type

<a name="CatalogParser.IsStructType"></a>
### func \(\*CatalogParser\) IsStructType

```go
func (p *CatalogParser) IsStructType(modelUniqueID, columnName string) bool
```

IsStructType checks if a column is a STRUCT type

<a name="CatalogParser.ProcessModelColumns"></a>
### func \(\*CatalogParser\) ProcessModelColumns

```go
func (p *CatalogParser) ProcessModelColumns(model *models.DbtModel) (*models.DbtModel, error)
```

ProcessModelColumns processes model columns by merging with catalog information

<a name="DbtParser"></a>
## type DbtParser

DbtParser is the main DBT parser that coordinates parsing of manifest and catalog files

```go
type DbtParser struct {
    // contains filtered or unexported fields
}
```

<a name="NewDbtParser"></a>
### func NewDbtParser

```go
func NewDbtParser(cliArgs interface{}, rawManifest, rawCatalog map[string]interface{}) (*DbtParser, error)
```

NewDbtParser creates a new DbtParser instance

<a name="DbtParser.GetModels"></a>
### func \(\*DbtParser\) GetModels

```go
func (p *DbtParser) GetModels() ([]*models.DbtModel, error)
```

GetModels parses dbt models from manifest and filters by criteria

<a name="ExposureParser"></a>
## type ExposureParser

ExposureParser handles parsing of DBT exposures from manifest

```go
type ExposureParser struct {
    // contains filtered or unexported fields
}
```

<a name="NewExposureParser"></a>
### func NewExposureParser

```go
func NewExposureParser(manifest *models.DbtManifest) *ExposureParser
```

NewExposureParser creates a new ExposureParser instance

<a name="ExposureParser.GetAllExposures"></a>
### func \(\*ExposureParser\) GetAllExposures

```go
func (p *ExposureParser) GetAllExposures() []models.DbtExposure
```

GetAllExposures gets all exposures from the manifest

<a name="ExposureParser.GetExposureByName"></a>
### func \(\*ExposureParser\) GetExposureByName

```go
func (p *ExposureParser) GetExposureByName(name string) (*models.DbtExposure, bool)
```

GetExposureByName gets a specific exposure by name

<a name="ExposureParser.GetExposureModelDependencies"></a>
### func \(\*ExposureParser\) GetExposureModelDependencies

```go
func (p *ExposureParser) GetExposureModelDependencies(exposureName string) ([]string, bool)
```

GetExposureModelDependencies gets all model dependencies for an exposure

<a name="ExposureParser.GetExposures"></a>
### func \(\*ExposureParser\) GetExposures

```go
func (p *ExposureParser) GetExposures(tag string) []string
```

GetExposures gets exposure names, optionally filtered by tag

<a name="ExposureParser.GetExposuresByTag"></a>
### func \(\*ExposureParser\) GetExposuresByTag

```go
func (p *ExposureParser) GetExposuresByTag(tag string) []models.DbtExposure
```

GetExposuresByTag gets all exposures with a specific tag

<a name="ExposureParser.ValidateExposureRefs"></a>
### func \(\*ExposureParser\) ValidateExposureRefs

```go
func (p *ExposureParser) ValidateExposureRefs(modelNames []string) map[string][]string
```

ValidateExposureRefs validates that all exposure refs point to existing models

<a name="ModelFilterOptions"></a>
## type ModelFilterOptions

ModelFilterOptions contains options for filtering models

```go
type ModelFilterOptions struct {
    SelectModel   string
    Tag           string
    ExposedNames  []string
    IncludeModels []string
    ExcludeModels []string
}
```

<a name="ModelParser"></a>
## type ModelParser

ModelParser handles parsing of DBT models from manifest

```go
type ModelParser struct {
    // contains filtered or unexported fields
}
```

<a name="NewModelParser"></a>
### func NewModelParser

```go
func NewModelParser(manifest *models.DbtManifest, cfg *config.Config) *ModelParser
```

NewModelParser creates a new ModelParser instance

<a name="ModelParser.FilterModels"></a>
### func \(\*ModelParser\) FilterModels

```go
func (p *ModelParser) FilterModels(modelsList []*models.DbtModel, options ModelFilterOptions) []*models.DbtModel
```

FilterModels filters models based on multiple criteria

<a name="ModelParser.GetAllModels"></a>
### func \(\*ModelParser\) GetAllModels

```go
func (p *ModelParser) GetAllModels() ([]*models.DbtModel, error)
```

GetAllModels gets all models from manifest

<a name="ModelParser.GetModelByName"></a>
### func \(\*ModelParser\) GetModelByName

```go
func (p *ModelParser) GetModelByName(name string) (*models.DbtModel, error)
```

GetModelByName gets a specific model by name

<a name="ModelParser.GetModelsByTag"></a>
### func \(\*ModelParser\) GetModelsByTag

```go
func (p *ModelParser) GetModelsByTag(tag string) ([]*models.DbtModel, error)
```

GetModelsByTag gets all models with a specific tag

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
